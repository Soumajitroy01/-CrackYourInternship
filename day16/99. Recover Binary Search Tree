class Solution {
public:
    TreeNode *firstNode,*secondNode,*prevNode;
    void recoverTree(TreeNode* root) {
        if(root==NULL) return;
        
        inorder(root);
        
        if(firstNode!=NULL && secondNode!=NULL)
        {
            int tmp=firstNode->val;
            firstNode->val=secondNode->val;
            secondNode->val=tmp;
        }
    }
    void inorder(TreeNode *root)
    {
        if(root==NULL) return;
        
        inorder(root->left);
        
        if(prevNode!=NULL && root->val < prevNode->val && firstNode==NULL)
            firstNode = prevNode;
        if(prevNode!=NULL && root->val < prevNode->val && firstNode!=NULL)
            secondNode = root;
        
        prevNode = root;
        
        inorder(root->right);
    }
};

static bool     _foo = ios::sync_with_stdio(false);
static ostream* _bar = cin.tie(NULL);
