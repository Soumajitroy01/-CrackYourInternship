class Solution {
public:
    int maxPoints(vector<vector<int>>& p) {
        int n = p.size();
        if(n==1) return 1;
        
        unordered_map<double,int> mp;
        double slope;
        int ans=0;
        
        for(int i=0;i<n;i++)
        {
            mp.clear();
            int x1=p[i][0],y1=p[i][1];
            for(int j=i+1;j<n;j++)
            {
                int x2 = p[j][0], y2 = p[j][1];
                
                if(x2-x1==0) slope = DBL_MAX;
                else if(y2-y1==0) slope = 0;
                else
                    slope = (double)(y2-y1)/(double)(x2-x1);
                mp[slope]++;                
            }
            
            for(auto slope:mp)
                ans = max(ans,slope.second+1);
        }
        
        return ans;
    }
};
