class Solution {
ListNode *merge(ListNode *list1, ListNode *list2){
        if(list1 == nullptr) return list2;
        if(list2 == nullptr) return list1;
        
        ListNode *head = nullptr;        
        if(list1->val <= list2->val){
            head = list1;
            head->next = merge(list1->next, list2);
        }
        
        else if(list2->val < list1->val){
            head = list2;
            head->next = merge(list1, list2->next);
        }
        
        return head;
    }
    
    ListNode *merge_sort(vector<ListNode*> &lists, int start, int end){
        if(start == end) return lists.at(start);
        
        int mid = start + (end - start) / 2;
        
        ListNode *list1 = merge_sort(lists, start, mid);
        ListNode *list2 = merge_sort(lists, mid + 1, end);
        
        return merge(list1, list2);
    }
    
public:
    ListNode* mergeKLists(vector<ListNode*>& lists) {
        if(lists.empty()) return nullptr;
        
        return merge_sort(lists, 0, lists.size() - 1);
    }
};
